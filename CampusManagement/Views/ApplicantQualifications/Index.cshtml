@model CampusManagement.Models.ApplicantQualificationViewModel
@{
    ViewBag.Title = "Applicant Qualifications";
    ////Layout = "~/Views/Shared/_MyLayout.cshtml";
}


@{
    if (Model.SelectedApplicantQualification != null)
    {
        if (Model.DisplayMode == "Delete")
        {
            Html.RenderPartial("Delete", Model.SelectedApplicantQualification);
        }
        else if (Model.DisplayMode == "ReadWrite")
        {
            Html.RenderPartial("Edit", Model.SelectedApplicantQualification);
        }
    }
    if (Model.DisplayMode == "WriteOnly")
    {
        Html.RenderPartial("Create", new CampusManagement.Models.ApplicantQualification());
    }
}

@section Scripts {
    <script>
        $(document).ready(function () {
            $("#tab3").css("background", "#eee");

            var rowCount = $("#hdnRowCount").val();
            for (i = 1; i <= rowCount; i++) {
                $("#YearQualification_" + i).ForceNumericOnly();
                $("#TotalMarks_" + i).ForceNumericOnly();
                $("#ObtainedMarks_" + i).ForceNumericWithDot();

                $("#YearQualification_" + i).attr("maxlength", "4");
                $("#TotalMarks_" + i).attr("maxlength", "4");
                $("#ObtainedMarks_" + i).attr("maxlength", "5");

                if($("#YearQualification_" + i).val() == "0")
                {
                    $("#YearQualification_" + i).val("");
                }

                if ($("#TotalMarks_" + i).val() == "0") {
                    $("#TotalMarks_" + i).val("");
                }

                if ($("#ObtainedMarks_" + i).val() == "0") {
                    $("#ObtainedMarks_" + i).val("");
                }

                if ($("#InstituteID_" + i).val() == "0") {
                    $("#InstituteID_" + i).val("");
                }
            }
            
            var rowCount1 = 100 + parseInt($("#hdnRowCount1").val());
            for (j = 100; j <= rowCount1; j++) {
                $("#TotalMarks_" + j).ForceNumericOnly();
                $("#ObtainedMarks_" + j).ForceNumericWithDot();

                $("#TotalMarks_" + j).attr("maxlength", "4");
                $("#ObtainedMarks_" + j).attr("maxlength", "5");

                if ($("#TotalMarks_" + j).val() == "0") {
                    $("#TotalMarks_" + j).val("");
                }

                if ($("#ObtainedMarks_" + j).val() == "0") {
                    $("#ObtainedMarks_" + j).val("");
                }
            }

            if ($("#DegreeDocument").val() != "") {
                $("#imgView").attr("src", $('#DegreeDocument').val());
            }
            else {
                $("#DegreeDocument").val("@Url.Content("~/DegreeDocument/noimage.png")");
            }
        });

        function CalculatePercentage(ControlID) {
            var TotalMarks = "#TotalMarks" + ControlID.id.substring(ControlID.id.indexOf("_"), ControlID.id.length);
            var ObtainedMarks = "#ObtainedMarks" + ControlID.id.substring(ControlID.id.indexOf("_"), ControlID.id.length);
            var PercentageField = "#Percentage" + ControlID.id.substring(ControlID.id.indexOf("_"), ControlID.id.length);

            if ($(TotalMarks).val() != "" && $(ObtainedMarks).val() != ""
                && $(TotalMarks).val() != "0" && $(ObtainedMarks).val() != "0") {

                if (parseFloat($(ObtainedMarks).val()) > parseFloat($(TotalMarks).val())) {
                    alert("Obtained Marks are greater then Total Marks.");
                    $(TotalMarks).val("0");
                    $(ObtainedMarks).val("0");
                    return;
                }

                var Percentage = (parseFloat($(ObtainedMarks).val()) / parseFloat($(TotalMarks).val())) * 100;
                $(PercentageField).val(parseFloat(Percentage).toFixed(2));
            }
        }

    </script>
}


