@model CampusManagement.Models.SF_GetBatchWiseAmounts_Result
@{
    ViewBag.Title = "ProgramWiseAmountsDashboard";
    ////Layout = "~/Views/Shared/_MyLayout.cshtml";
}

<h2>ProgramWise Fee Receipt Dashboard </h2>


<!DOCTYPE HTML>
<html>
<head>

    <script src="@Url.Content("~/assets/DashboardChart/Canvas.js")"></script>

    <script>

        window.onload = function () {
            //-Designation wise Teacher Summary
            var print = new CanvasJS.Chart("chartContainer11", {

                exportEnabled: true,

            });
            print.render();

            var chart11 = new CanvasJS.Chart("chartContainer11", {

                exportEnabled: true,
                title: {
                    text: "Program Wise Fee Receipt "
                },

                legend: {

                    //verticalAlign: "center",
                    //horizontalAlign: "left",
                    fontSize:12,
                    fontFamily: "Helvetica",

                },
                data: [{
                    type: "pie",
                    startAngle: 60,
                    showInLegend: true,
                    legendText: "{label}-{y}",
                    indexLabelFontSize: 16,
                    indexLabel: " {label}-{y}",
                    toolTipContent: "<b>{label}:</b>{y}",

                    dataPoints: @Html.Raw(ViewBag.DataPoints12),
                }],



            });
            chart11.render();
        }
    </script>
</head>
<body>

    @using (Html.BeginForm("ProgramWiseAmountsDashboard", "DashboardStudents", FormMethod.Post))
    {
        @Html.AntiForgeryToken()
        @Html.AntiForgeryToken()
        <div class="row">
            <div class="col-sm-8">
                @Html.LabelFor(model => model.BatchID, "Session", htmlAttributes: new { @class = "control-label" })
                @Html.DropDownListFor(model => model.BatchID, null, htmlAttributes: new { @class = "form-control" })
                @Html.ValidationMessageFor(model => model.BatchID, "", new { @class = "text-danger" })
            </div>
            <div class="col-sm-4 hidden">
                @Html.LabelFor(model => model.BatchProgramID, "Program", htmlAttributes: new { @class = "control-label" })
                @Html.DropDownList("BatchProgramID", null, htmlAttributes: new { @class = "form-control" })
                @Html.ValidationMessageFor(model => model.BatchProgramID, "", new { @class = "text-danger" })
            </div>


        </div>
        <br />
        <div class="row">
            <div class="col-sm-5">
                <input type="submit" value="Search" class="btn btn-primary" />
                <a href="@Url.Content("~/DashboardStudents/ProgramWiseAmountsDashboard")" class="btn btn-primary">Refresh</a>
            </div>
        </div>
       
        <br />
        <div class="row" style="border-top: solid 1px #808080 !important;margin-bottom:40px">

            <div class="col-sm-12" style="margin-top:30px">
                <div class="col-sm-12">
                    <div id="chartContainer11" style="height: 370px; width: 100%;"></div>
                </div>

            </div>

        </div>
    }
</body>
</html>




<input type="hidden" id="hdnBatchID" name="hdnBatchID" value="@ViewBag.hdnBatchID" />
<input type="hidden" id="hdnBatchProgramID" name="hdnBatchProgramID" value="@ViewBag.hdnBatchProgramID" />

@section Scripts {
    <script>

        $(document).ready(function () {

            $("#BatchID").change(function () {
                GetPrograms_by_FacultyLevelBatch();
                $("#BatchProgramID").val(@ViewBag.hdnBatchProgramID);

            });

            GetPrograms_by_FacultyLevelBatch();
            $("#BatchProgramID").val(@ViewBag.hdnBatchProgramID);

        });

        function GetPrograms_by_FacultyLevelBatch() {

            var BatchID = $("#BatchID").val();
            $.ajax({
                url: "@Url.Content("~/DashboardStudents/GetPrograms_by_FacultyLevelBatch")",
                type: 'POST',
                datatype: 'application/json',
                contentType: 'application/json',
                async: false,
                data: JSON.stringify({ BatchID: +BatchID }),
                success: function (result) {
                    $("#BatchProgramID").html("");
                    $("#BatchProgramID").append($('<option></option>').val("0").html("--Please Select--"));
                    $.each($.parseJSON(result), function (i, sem) {
                        $("#BatchProgramID").append($('<option></option>').val(sem.BatchProgramID).html(sem.ProgramName));
                    });
                },
                error: function (ex) {
                    alert(ex.error);
                },
            });
        }
    </script>
}


