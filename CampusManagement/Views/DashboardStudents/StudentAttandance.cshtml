
<h2>Student Attendance</h2>

@model CampusManagement.Models.GetAttandanceStudentSummaryForDashboard_Result

@{
    ViewBag.Title = "Student Attendance";
    ////Layout = "~/Views/Shared/_MyLayout.cshtml";
}




<!DOCTYPE HTML>
<html>
<head>

    <script src="@Url.Content("~/assets/DashboardChart/Canvas.js")"></script>

    <script>
        
        //total attandance of students
        window.onload = function () {
            var print = new CanvasJS.Chart("chartContainer1", {

                exportEnabled: true,

            });
            print.render();

            var chart1 = new CanvasJS.Chart("chartContainer1", {

                exportEnabled: true,
                title: {
                    text: "Total Attendance Students"
                },

                legend: {

                    //verticalAlign: "center",
                    //horizontalAlign: "left",
                    fontSize:12,
                    fontFamily: "Helvetica",

                },
                data: [{
                    type: "column",
                    startAngle: 60,
                    //showInLegend: true,
                    legendText: "{label} - {y}",
                    indexLabelFontSize: 16,
                    indexLabel: "{y}%",
                    toolTipContent: "<b>{label}:</b> {y}",

                    dataPoints: @Html.Raw(ViewBag.DataPoints1),
                }],



            });
            chart1.render();

            //total apsent student

            var chart2 = new CanvasJS.Chart("chartContainer2", {

                exportEnabled: true,
                title: {
                    text: "Sick Leave student"
                },

                legend: {

                    //verticalAlign: "center",
                    //horizontalAlign: "left",
                    fontSize:12,
                    fontFamily: "Helvetica",

                },
                data: [{
                    type: "column",
                    startAngle: 60,
                    //showInLegend: true,
                    legendText: "{label} - {y}",
                    indexLabelFontSize: 16,
                    indexLabel: "{y}",
                    toolTipContent: "<b>{label}:</b> {y}",

                    dataPoints: @Html.Raw(ViewBag.DataPoints2),
                }],



            });
            chart2.render();

            //total apsent student

            var chart3 = new CanvasJS.Chart("chartContainer3", {

                exportEnabled: true,
                title: {
                    text: " Present  Students"
                },

                legend: {

                    //verticalAlign: "center",
                    //horizontalAlign: "left",
                    fontSize:12,
                    fontFamily: "Helvetica",

                },
                data: [{
                    type: "column",
                    startAngle: 60,
                    //showInLegend: true,
                    legendText: "{label} - {y}",
                    indexLabelFontSize: 16,
                    indexLabel: "{y}",
                    toolTipContent: "<b>{label}:</b> {y}",

                    dataPoints: @Html.Raw(ViewBag.DataPoints3),
                }],



            });
            chart3.render();


            //total apsent student

            var chart4 = new CanvasJS.Chart("chartContainer4", {

                exportEnabled: true,
                title: {
                    text: "Absent Students"
                },

                legend: {

                    //verticalAlign: "center",
                    //horizontalAlign: "left",
                    fontSize:12,
                    fontFamily: "Helvetica",

                },
                data: [{
                    type: "column",
                    startAngle: 60,
                    //showInLegend: true,
                    legendText: "{label} - {y}",
                    indexLabelFontSize: 16,
                    indexLabel: "{y}",
                    toolTipContent: "<b>{label}:</b> {y}",

                    dataPoints: @Html.Raw(ViewBag.DataPoints4),
                }],



            });
            chart4.render();
            //total apsent student

            var chart5 = new CanvasJS.Chart("chartContainer5", {

                exportEnabled: true,
                title: {
                    text: " Casual Leave Student"
                },

                legend: {

                    //verticalAlign: "center",
                    //horizontalAlign: "left",
                    fontSize:12,
                    fontFamily: "Helvetica",

                },
                data: [{
                    type: "column",
                    startAngle: 60,
                    //showInLegend: true,
                    legendText: "{label} - {y}",
                    indexLabelFontSize: 16,
                    indexLabel: "{y}",
                    toolTipContent: "<b>{label}:</b> {y}",

                    dataPoints: @Html.Raw(ViewBag.DataPoints4),
                }],



            });
            chart5.render();

        }
    </script>
</head>
<body>

    @using (Html.BeginForm("StudentAttandance", "DashboardStudents", FormMethod.Post))
    {
        @Html.AntiForgeryToken()



        <br />
        <div class="row" style="border-top: solid 1px #808080 !important;margin-bottom:40px">

            <div class="col-sm-12" style="margin-top:30px">
                <div class="col-sm-12">
                    <div id="chartContainer1" style="height: 370px; width: 100%;"></div>
                </div>
                
            </div>
            
          

        </div>
        <div class="row" style="border-top: solid 1px #808080 !important;margin-bottom:40px">



            <div class="col-sm-12" style="margin-top:30px">

                <div class="col-sm-6">
                    <div id="chartContainer3" style="height: 370px; width: 100%;"></div>
                </div>
                <div class="col-sm-6">
                    <div id="chartContainer4" style="height: 370px; width: 100%;"></div>
                </div>
              

            </div>
        </div>
        <div class="row" style="border-top: solid 1px #808080 !important;margin-bottom:40px">




            <div class="col-sm-12" style="margin-top:30px">

                <div class="col-sm-6">
                    <div id="chartContainer2" style="height: 370px; width: 100%;"></div>
                </div>
                <div class="col-sm-6">
                    <div id="chartContainer5" style="height: 370px; width: 100%;"></div>
                </div>

            </div>
        </div>
    }
</body>
</html>
<input type="hidden" id="hdnBatchID" name="hdnBatchID" value="@ViewBag.hdnBatchID" />
<input type="hidden" id="hdnBatchProgramID" name="hdnBatchProgramID" value="@ViewBag.hdnBatchProgramID" />

@section Scripts {
    <script>

        $(document).ready(function () {
            
            $("#BatchID").change(function () {
                GetPrograms_by_FacultyLevelBatch();
                $("#BatchProgramID").val(@ViewBag.hdnBatchProgramID);

            });

            GetPrograms_by_FacultyLevelBatch();
            $("#BatchProgramID").val(@ViewBag.hdnBatchProgramID);

        });

        function GetPrograms_by_FacultyLevelBatch() {

            var BatchID = $("#BatchID").val();
            $.ajax({
                url: "@Url.Content("~/DashboardStudents/GetPrograms_by_FacultyLevelBatch")",
                type: 'POST',
                datatype: 'application/json',
                contentType: 'application/json',
                async: false,
                data: JSON.stringify({ BatchID: +BatchID }),
                success: function (result) {
                    $("#BatchProgramID").html("");
                    $("#BatchProgramID").append($('<option></option>').val("0").html("--Please Select--"));
                    $.each($.parseJSON(result), function (i, sem) {
                        $("#BatchProgramID").append($('<option></option>').val(sem.BatchProgramID).html(sem.ProgramName));
                    });
                },
                error: function (ex) {
                    alert(ex.error);
                },
            });
        }
    </script>
}


@*//////////////test//////////////*@
